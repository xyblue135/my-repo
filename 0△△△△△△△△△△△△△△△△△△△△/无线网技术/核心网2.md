5GC（5th Generation Core Network，第五代核心网）是5G（第五代移动通信技术）系统的关键组成部分，它负责处理和管理移动网络中的所有非接入层（non-access stratum，NAS）功能，即除了无线接入之外的所有网络功能。5GC作为新一代移动通信网络的核心大脑，为用户提供数据连接、会话管理、移动性管理、服务质量保证、安全认证、策略控制、网络切片等功能，并与5G无线接入网（NG-RAN，Next Generation Radio Access Network）协同工作，共同构成完整的5G网络架构。

5GC网元（Network Elements, NEs）是指5G核心网内部的各个功能模块，它们是具有特定职责的软件或硬件实体，通过标准化接口相互交互，共同完成5G核心网的各项服务。这些网元各自承担特定的功能模块，通过云化、虚拟化技术实现灵活部署和高效运营。以下是5GC中的一些主要网元及其功能概述：

1. **AMF (Access and Mobility Management Function)**:
    
    - 负责接入控制管理，包括用户设备（UE）的注册、连接管理、可达性管理、移动性管理等。
    - 处理UE与网络间的NAS消息，管理UE的网络状态（如空闲态、连接态）以及在不同网络区域间移动时的切换过程。
2. **SMF (Session Management Function)**:
    
    - 负责会话管理，包括建立、修改和释放UE的数据会话，如分配IP地址、创建并维护用户面路径（UPF的选择和隧道建立）。
    - 实施QoS（Quality of Service）策略、计费数据采集、漫游支持等。
3. **UPF (User Plane Function)**:
    
    - 用户面功能，负责数据包的转发、策略实施（如基于流的速率控制、过滤等）、流量报告以及网络切片间的数据传输。
    - 实现数据包的加密、解密、封装和解封装等处理，是数据流量的实际承载者。
4. **AUSF (Authentication Server Function)**:
    
    - 执行UE的接入认证过程，包括基于EAP（Extensible Authentication Protocol）的3GPP和非3GPP接入方式的认证。
    - 存储和管理用户的认证参数，与UDM协作完成身份验证和密钥协商。
5. **UDM (Unified Data Management)**:
    
    - 统一数据管理，存储和管理UE的签约数据、订阅信息、安全参数等。
    - 与UDR（Unified Data Repository）一起构成统一数据存储体系结构，支持计算与存储分离，提供数据存储服务。
6. **PCF (Policy Control Function)**:
    
    - 策略控制功能，制定和管理网络策略规则，如QoS策略、计费策略、网络资源访问控制等。
    - 根据用户订阅、网络状况、服务需求等信息，向其他网元（如SMF、UPF）提供实时的策略决策。
7. **NSSF (Network Slice Selection Function)**:
    
    - 网络切片选择功能，负责为UE选择合适的网络切片实例，确保UE获得所需的服务质量和特性。
8. **NRF (Network Repository Function)**:
    
    - 网络存储库功能，提供服务发现和网元间互操作的能力，维护网络中各网元的服务能力信息，使其他网元能够发现和连接到所需的网元服务。
9. **NEF (Network Exposure Function)**:
    
    - 网络暴露功能，提供统一的接口，将网络能力开放给第三方应用和服务，实现网络功能的外部访问和控制。

这些5GC网元通过标准化的接口（如N1、N2、N3、N4、N5、N6、N7、N8、N9、N10、N11等）进行交互，形成一个高度模块化、灵活可扩展、云原生设计的核心网架构，以支持5G网络的多样性和复杂性需求，如超高速数据传输、大规模物联网连接、低延迟通信、网络切片等特性。

# PCF
PCF（Policy Control Function）是5G（第五代移动通信）核心网（5GC）中的一个重要功能实体，负责制定和执行网络策略，以实现对用户数据流量的精细化管理和服务质量（QoS）保障。具体来说，PCF的主要职责包括：

1. **策略规则管理**：
    
    - 根据用户签约数据、网络运营需求、业务场景等信息，制定或接收各类网络策略规则。
    - 存储、更新和撤销策略规则，并确保策略规则的一致性和有效性。
2. **策略决策**：
    
    - 对接收到的策略查询请求（如来自SMF、UPF、AF等网络功能的请求）进行响应，根据请求上下文和已配置的策略规则，作出策略决策。
    - 策略决策可能包括QoS参数（如带宽、优先级、丢包率等）、计费规则、安全策略、网络资源分配策略等。
3. **策略下发与执行**：
    
    - 将策略决策结果通过标准化接口（如Npcf_PolicyControl）下发给相关网络功能，如SMF、UPF、AF等。
    - 相关网络功能根据收到的策略指令，在用户数据流中实施相应的策略，如设置QoS标记、执行计费操作、实施防火墙规则等。
4. **策略一致性与冲突处理**：
    
    - 确保在同一用户会话或同一网络资源上应用的策略规则之间不存在冲突，或在存在冲突时进行适当的协调与仲裁。
    - 在策略变更时，确保新旧策略之间的平滑过渡，避免对用户服务造成影响。
5. **网络切片支持**：
    
    - 在网络切片环境中，PCF负责为特定网络切片制定和执行符合该切片服务特性的策略规则，确保不同切片间的策略隔离和资源优化。
6. **与其他网络功能交互**：
    
    - 与UDM（Unified Data Management，统一数据管理功能）、AF（Application Function，应用功能）、SMF、UPF等进行必要的交互，获取用户信息、业务需求、网络状态等数据，以支持策略制定和决策过程。

综上所述，PCF在5G网络中充当策略中心的角色，通过制定、决策和下发网络策略，对用户数据流量进行精细化管理，以实现服务等级保障、计费准确、安全控制、网络资源优化等目标。PCF通过与其他网络功能的紧密协作，确保策略在整个网络中的有效实施，为用户提供一致、可控、按需的服务体验。