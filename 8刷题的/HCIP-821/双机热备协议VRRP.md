
# 虚拟路由器
单选题 261/1247、下列关于VRRP的描述错误的是
VRRP是一种冗余备份协议，为具有组播或广播能力的局城网如以太网设计保证当局城网内主机的下一跳路由器设备出现
故障时，可以及时的有另一台路由器来代替，从而保持网络通信的连续性和可靠性
**在使用VRRP协议时，需要在路由器上配置虚拟路由器号和虚拟IP地址，直接使用`主路由器`的真实MAC，这样在这个网络**
**中就加入了一个虚拟路由器**
网络上的主机与虚拟路由器通信，不需要了解这个网络上物理路由器的所有信息

单选题 261/1247、下列关于VRRP的描述错误的是
VRRP是一种冗余备份协议，为具有组播或广播能力的局城网如以太网设计保证当局城网内主机的下一跳路由器设备出现
故障时，可以及时的有另一台路由器来代替，从而保持网络通信的连续性和可靠性
**在使用VRRP协议时，需要在路由器上配置虚拟路由器号和虚拟IP地址，直接使用**`主路由器`**的真实MAC，这样在这个网络中就加入了一个虚拟路由器**
网络上的主机与虚拟路由器通信，不需要了解这个网络上物理路由器的所有信息
一个虚拟路由器由一个主路由器和若干个备份路由器组成，主路由器实现真正的转发功能，当主路由器出现故障时，一个备份路由器将成为新的主路由器并接替他的工作

<u>在使用协议时，需要在路由器上配置虚拟路由器号和虚拟IP地址，直接使用虚拟路由器的虚拟MAC，这样在这个网络中就加入了一个虚拟路由器</u>。

# 优先级
单选题107/1247 在VRRP中，同一备份组的设备在进行VRRP报文认证时，以下哪一参数不会影响Master设备和Backup设备认证协商结果
认证方式
认证字
**优先级**
VRRP版本
<u>解析：文字狱啊属实是，这个影响的是选举结果,而不是认证协商结果。
VRRPv2版本支持认证，而VRRPv3版本不支持认证，版本不一致会影响认证协议结果，而优先级只会影响Master设备的选举。</u>
# vrrp优先级不会导致出现两台master设备 ，这肯定会有一个是master 的 也就是不会异常。
单选题108/1247、在VRRP中，以下哪一原因不会导致同一个备份组中出现两台Master设备？
虚拟IP地址个数不一致
VRRP版本不同
通过报文发送间隔不一致
**VRRP优先级不一致**
# 组播地址
VRRP报文的组播目的地址是“224.0.0.18”。
单选题
121/1247、VRRP的报文的组播目的地址是：

224.0.1.18
**224.0.0.18**
224.0.0.20
224.0.1.20
# 报文协议号
单选题
145/1247、VRRP报文的IP协议号是：
116
114
**--112--**
118
# VRRP联动BFD
单选题
229/1247、在华为设备中，以下哪一条命令可以用来配置VRRP与BFD联动？
track vrrp vrid 1 bfd-session session-name 1 reduced 100
bfd -session vrrp vrid 1 track session-nane 1 reduced 100
vrrp vrid 1 track bfd-session-name 1 reduced 100
**vrrp vrid 1 track bfd-session session-name 1 reduced 100**
<u>解析：vrrp   vrid trackbfd        -session命令用来使能 V RRP通过联动BFD会话状态来实现主备切换的功能
undo vrrp vrid trackbfd-session命令用来去使能VRRP 通过 联动BFD会话状态来实现主备切换的功 能
缺省情况下，VRRP通过监视BFD会话状态来实现主备切换的功能 未使能</u>
# 虚拟mac地址
单选题243/1247、一个VRRP虚拟路由器配置VRID是3，虚拟IP地址是100.1.1.10，那么虚拟MAC地址是以下哪一项？
00-00-5E-00-01-64
**00-00-5E-00-01-03**
01-00- 5E-00-01 -64
01-00-5E-00-01-03
单选题427/1247、两台VRRP路由器组成了VRID为2的备份组，并配置虚拟IP地址为2001：1，那么该备份组的虚拟MAC地址是以下哪
个？
00-00-5E-00-01-02
00-00-5E-00-02-01
**00-00-5E-00-02-02**
00-00-5E-00-01-01

<u>00-00-5E-00-01-{VRID} (Ipv4)
分割分割00-00-5E-00-02-{VRID} (Ipv6)</u>
# vrrp主备选举过程描述
![image-2024718242668.png|425](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/vrrp/image-2024718242668.png)
同时启动的情况下， R1 比R2更快切换至Master状态
最终R1会发送免费ARP报文
两台设备完成初始化后都会先切换至Backup状态
**两台设备在各自 MASTER DOWN定时器超时时间后，都会切换至Master状态**
<u>不会都变成Master，而是进行VRRP优先级的比较，以及网关接口IP地址大小的比较。都是越大越好</u>

# vrrp抢占
单选题269/1247、关于VRRP master设备的描述，错误的是
定期发送VRRP报文
以虚拟MAC地址响应对虚拟IP地址的ARP请求
转发目的MAC地址为虚拟MAC地址的IP报文
**即使该路由器已经是Master,也会被优先级高的Backup路由器抢占**
<u>D选项没有指明是抢占模式还是非抢占模式下，描述不严谨</u>
![image-20247184663.png|375](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/vrrp/image-20247184663.png)
# VRRP的initialize状态
VRRP（Virtual Router Redundancy Protocol，虚拟路由器冗余协议）定义了三种主要状态：INITIALIZE、BACKUP和MASTER。INITIALIZE状态是VRRP路由器启动时的初始状态，或者当接口刚变为UP状态时所处的状态。
在INITIALIZE状态下，VRRP路由器执行以下操作：
1. **初始化计时器和变量**：VRRP路由器会初始化其内部计时器和变量，例如ADVERTISE_INTERVAL（通告间隔）和MASTER_DOWN_INTERVAL（主路由器失效间隔）。
2. **开始接收VRRP报文**：路由器开始监听VRRP通告报文，以便从其他VRRP路由器那里获取信息。
3. **计算优先级**：VRRP路由器会根据配置的优先级和当前的状态来计算自己的优先级，这将决定它是否可以成为MASTER
4. **确定状态转换**：一旦初始化完成，路由器会根据接收到的VRRP通告报文和自身的优先级来确定是否应该转换到MASTER或BACKUP状态。
- 如果接口上的优先级被设置为255（最高优先级）并且没有检测到其他具有相同优先级的VRRP路由器，路由器将直接转换为MASTER状态。
- 如果优先级低于255，路由器将检查是否有当前的MASTER存在。如果没有，它可能成为MASTER；如果有，它将保持在BACKUP状态，等待MASTER出现故障。
在INITIALIZE状态中，VRRP路由器不会处理任何VRRP报文，也不会转发任何数据包。只有当路由器进入MASTER或BACKUP状态后，它才开始参与VRRP的正常运作。当处于MASTER状态时，路由器会负责转发数据包至虚拟IP地址，并定期发送VRRP通告报文来声明其身份。当处于BACKUP状态时，路由器会监听MASTER的通告报文，并准备在MASTER出现故障时接管其职责。
# vrrp的initialize竞选
单选题304/1247、以下关于VRRP协议lnitialize状态的描述，错误的是哪一项？
**处于lnitialize状态的设备，接口Up之后，若设备优先级为100，则会在竞选完之后再选举角色**
处于Initialize状态的设备，接口Up之后，若设备优先级为255，则直接成为Master设备
设备刚配置VRRP时会进入到Initialize状态
设备检测到故障时会进入到Initialize状态
在VRRP中，如果一个设备的优先级被配置为255，这是最高的优先级，这样的设备将直接成为MASTER，而无需进行竞选。
而对于优先级不是255的设备，它们会根据各自的优先级进行竞选，优先级高的设备会成为MASTER，优先级低的设备则成为BACKUP。
但是，优先级为100的设备并不会特别地“在竞选完之后再选举角色”，它会立即根据当前网络中其他VRRP设备的优先级和状态来确定自己的角色。
# VRRP的master
单选题
308/1247、以下关于VRRP协议中Master设备的描述，错误的是哪一项？
**Master设备收到与自己优先级相等的VRRP报文且本地接口IP地址小于对端接口IP会立即成为Backup**
Master设备收到比自己优先级数值小的VRRP报文时，会立即切换为Backup
正常运行的IP地址拥有者必定是Master设备
只有Master设备会响应对虚拟IP地址的ARP请求
<u>VRRP的Master接口上收到比自己VRRP的优先级小的报文后，不会变成备份网关。对于VRRP协议而言，优先级越大越好。</u>
# 两个版本vrrpv2和v3
单选题 316/1247、现有两台华为设备R1和R2组成一个VRRP备份组，R1为VRRPv2版本，R2为VRRPv3版本。以下关于该备份组的描
述，错误的是哪一项？
R2配置命令vrrp version-3 send-packet-mode v2v3-both后， 可与R1交互VRRP报文
R2配置命令vrrp version-3 send-packet-mode v3-only后， 不可与R1交互VRRP报文
R2配置命令vrrp version-3 send-packet-mode v2-only后， 可与R1交互VRRP报文
**缺省情况下.R1和R2可交互VRRP报文**

# AC是AP老大
单选题324/1247、以下关于在WLAN网络中配置双机热备功能的描述，**错误**的是哪一项？
双链路热备份主备切换时，由于切换时间较长，此期间会造成隧道转发的业务数据中断，同时将导致新用户无法上线，已上线用户无法实现漫游的情况
**在配置双链路热备份时，主AC完成业务配置后，执行commit命令将配置下发到AP，然后再完成备AC的配置**
在配置双链路热备份时，需要在主备AC都完成业务配置后，再在主AC上使用commit命令将配置下发到AP
在配置双链路热备份时，对于主备AC上关联的同一AP，其V LAN相关的业务配置必须保持一致，否则当AC的主备状态切换后，无法保证AP正常工作

# 切换时间(master故障)
![image-202472013032.png|350](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E5%8F%8C%E5%87%BB%E7%83%AD%E5%A4%87%E5%8D%8F%E8%AE%AEVRRP/image-202472013032.png)
约0.22秒后切换为Masten设备
**约3.61秒后切换为Master设备**
不做任何动作，保特原状态
约0.61秒后切换为Masten设备
<u>当Master路由器发生网络故障而不能发送VRRP报文的时候，Backup路由器并不能立即知道其工作状况。Backup路由器等待一段时间之后，如果还没有接收到VRRP报文，那么会认为Master路由器无法正常工作，而把自己升级为Master路由器 。Backup路由器默认等待的时间称为Master_Down_Interval：（3×VRRP报文的发送时间间隔）＋Skew time Skew time，计算方式为：（256－Backup路由器的优先级）/256，单位为秒 Master_Down_Interval=3*1+(256-100)/256≈3.61注意：题库里还有一题类似的题目，但是该题是R1主动放弃，而不是发生故障</u>
# 切换时间（主动放弃master角色-0.61秒）
![image-20247201848977.png|375](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E5%8F%8C%E5%87%BB%E7%83%AD%E5%A4%87%E5%8D%8F%E8%AE%AEVRRP/image-20247201848977.png)
约0.22秒后切换为Master设备
**约0.61秒后切换为Master设备**
立即切换为Master设备
约3.61秒后切换为Master设备
<u>Master路由器主动放弃Master地位（如Master路由器退出虚拟路由器）时，会发送优先级为0的VRRP报文，致使Backup路由器快速切换变成Master路由器。这个切换的时间称为Skew time，计算方式为：（256－Backup路由器的优先级）/256Master_Down_Interval=(256-100)/256≈0.61注意：题库里还有一题类似的题目，但是该题是R1出现故障，而不是主动放弃如果是R1出现故障，而不是主动放弃，则需要额外加上3*VRRP报文的发送时间间隔 (即3秒)</u>

# 切换时间（master角色发生故障-修复-立刻切换回master）
![image-2024720423212.png|425](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E5%8F%8C%E5%87%BB%E7%83%AD%E5%A4%87%E5%8D%8F%E8%AE%AEVRRP/image-2024720423212.png)
**立即切换为Master设备**
立即切换为Backup设备
约3.61秒切换为Master设备
0.61 秒切换为Master设备

# 切换问题
单选题358/1247、以下关于VRRP工作过程的描述，错误的是哪一项？
稳定后的Master设备会周期性发送通告报文
VRRP备份组中，首先会根据V RRP优先级选举Master设备
**原Master设备发生故障后，新Mlaster设备会立即发送ARP报文**
若Master设备发生故障， Backup设备会立即切换为Master设备
<u>若Master设备发生故障, Backup设备会等待Master-Down interval再切换为Master</u>



# 双联路 N+1备份 VRRP双击热备
单选题 343/1247、为保证WLAN组网的可靠性，现有两台同型号AC在同一机房，且要求主备之问若发生故障能够尽可能的完成快速切
换，则建议部署以下哪一种备份技术？
双链路热备
双链路冷备
**VRRP双机热备**
N+1备份
<u>如果部署“VRRP双机热备”，缺省情况下，VRRP备份组中设备因接口状态UP导致抢占的抢占延迟时间为5秒；其他原因导致抢占的抢占延迟时间为0秒，即立即抢占</u>。


单选题359/1247、在WLAN组网中.以下哪一种备份技术是**成本最低且切换速度最慢的**？
**N+1备份**
双链路热备
VRRP双机热备
双链路冷备

单选题379/1247、在WLAN组网中，以下哪一种备份同时支持主备备份和负载分担备份？
**双链路冷备**
双链路热备
N+1备份
VRRP双机热备
<u>流量切换
依据双机热备份使用的流量切换方式，双机热备份可以分为：
VRRP热备份：通过VRRP实现流量切换，只适用于主备备份方式。
双链路热备份：通过双链路实现流量切换，适用于主备备份和负载分担方式</u>

单选题 415/1247、在WLAN组网中，可靠性技术的种类默多，我们根据其解决网络故障的侧重不同，可分为故障检测技术和保护倒换技
术。其中不属于保护倒换技术的是以下哪一个？
N+1备份技术
VRRP双机热备技术
双链路冷备技术
**EFM技术**
<u>EFM技术属于故障检测技术，不属于保护倒换技术。EFM一种监控网络故障的工具，主要用于解决以太网接入  “最后一公里” 中常见的链路问题。用户通过在两个点到点连接的设备上启用EFM功能，可以监控这两台设备之间的链路状态</u>

# n+1属于冷备份呢
单选题 533/1247、以下关于N+1备份的描述，正确的是哪一项？
主备AC的型号和软件版本需完全一致
主备AC产品型号可以不同，但建议保证AC的软件版本一致
一台备AC能为多台主AC提供备份服务，降低购买设备的成本，可靠性高于VRRP双机热备
**N+1备份属于冷备份，不备份AP信息和STA信息**
<u>N+1备份场景中，主AC不会将STA的信息同步给备份的AC。所以是属于冷备份的，他的主备切换速度是最慢的。但是主备AC之间的型号和软件版本是可以不一致的，但是依然强烈建议使用相同的设备型号和软件版本。</u>


# VRRP负载分担描述
单选题407/1247、以下关于VRRP负载分担的描述，**错误**的是哪一项？
**同一台VRRP设备在加入多个备份组时的优先级需保特一致**
一台 VRRP设备可担任多 个备份组的Master设备
VRRP负载分担与VRRP主备备份的报文协商过程一致
为保证业务正常，每 个VRRP备份组中有且只有一个Master设备
<u>同一台VRRP设备在加入多个备份组时，优先级可以每个备份组单独设置，无需一致。</u>

# vrrp描述
单选题451/1247、以下关于VRRP的描述，错误的是哪一项？
当两台优先级相同的路由器同时竞争Master时，优选接口地址大的为M aster
**缺省情况下，如果已经存在Master，为了网络稳定性，优先级更大的Backup不会进行抢占**
如果Backup路由器工作在 非抢占方式下，则只要Master路由器没有出现故障，Backup路由器即使随后被配置了更高的
优先级也不会成为Master 路由器
VRRP优先根据优先级来确定虚拟路由器中每台路由器的地位
![1670999254791.png|207](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E5%8F%8C%E5%87%BB%E7%83%AD%E5%A4%87%E5%8D%8F%E8%AE%AEVRRP/1670999254791.png)

# wlan热备的vrrp（vrrp要在二层发送报文）
单选题 457/1247、以下关于WLAN热备份的描述，错误的是哪一项？
**VRRP热备时，主/备AC可以在不同的二层网络，通过三层互通来进行备份**
配置VRRP热备时，主/备AC必须在同一个二层网络
双链路热备时，可以通过将主/备AC的优先级配置成一致来实现负载分担方式的备份
配置VRRP热备时，可以通过配置V RRP的优先级来决定AC设备的主备角色
<u>VRRP不可以通过三层网络互通来进行备份，要在二层发送组播报文。AC通过优先级、负载情况、IP地址选择主备AC。</u>

# VRRP版本v2v3 对应ipv4/v6
单选题510/1247、以下关于VRRP版本的描述，**错误**的是哪一项？
VRRPv2发送通告报文的时间间隔是以秒为单位
V RRPv3不支持认证功能
**V RRPv2适用于IPv4和IPv6两种网络**
VRRPv2支持认证功能
<u>目前，VRRP协议包括两个版本：VRRPv2和VRRPv3。VRRPv2仅适用于IPv4网络，VRRPv3适用于IPv4和IPv6两种网络。</u>

# 判断-------------------------------
判断题908/1247、缺省情况下，华为AR路由器的VRRP运行在抢占模式下。
**正确**
<u>抢占模式（默认激活）：如果Backup路由器激活了抢占功能，那么当它发现Master路由器的优先级比自己更低时，它将立即切换至Master状态，成为新的Master路由器。  非抢占模式：如果Backup路由器没有激活抢占功能，那么即使它发现Master路由器的优先级比自己更低，也只能依然保持Backup状态，直到Master路由器失效。</u>
判断题913/1247、一台VRRP虚拟路由器只能拥有虚拟IP地址。
**错误**
<u>一台VRRP虚拟路由器可以拥有虚拟IP地址、物理IP地址、虚拟MAC地址等。</u>

判断题978/1247、VRRP中当两台优先级相同的设备同时竞争小的接口所在的设备应当被选为Master设备
**错误**
<u>当两台优先级相同的设备同时竞争Master角色时，则IP地址较大的接口所在的设备应当被选为Master设备。</u>

判断题979/1247、VRRP的接口IP地址和虚拟IP地址可以相同
**正确**
<u>VRRP的接口IP地址和虚拟IP地址可以相同，如果相同的时候则该接口VRRP将直接称为master</u>

判断题1002/1247、在VRRP中，当虚拟路由器回应ARP请求时，会使用主路由器直连接口MAC地址。
**错误**
<u>由于在一个VRRP组中，多个路由器需要作为一台虚拟路由器对外提供服务。因此，虚拟路由器回应ARP请求时，使用虚拟路由器的虚拟MAC地址</u>

判断题1108/1247、在WLAN组网场景下，VRRP双机热备中只有主AC负责业务运行，当主AC出现故障之后，备AC才会接替主AC进行业务运行。
**正确**
<u>VRRP双机热备中只有主AC负责业务运行，当主AC出现故障之后，备AC才会接替主AC进行业务运行</u>

填空题1155/1247、在双链路双机热备的主备协商中，AP会收集并比较主备AC回应的0报文中所携带的参数来抉择出主AC。（请注意英文首字母大写，中间用空格隔开）
**Discovery Response**
<u>在Discovery阶段，AP发送Discovery Request报文，AC在收到AP的报文后会回应Discovery Response报文，并在Discovery Response报文中携带优选AC的IP地址、备选AC的IP地址、N+1备份开关、AC优先级、负载情况以及AC的IP地址。AP根据收到的多个AC回应的信息，来选择主AC并开始与其建立CAPWAP链路</u>

![image-2024724389616.png|400](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E5%8F%8C%E6%9C%BA%E7%83%AD%E5%A4%87%E5%8D%8F%E8%AE%AEVRRP/image-2024724389616.png)
1 Master Backup