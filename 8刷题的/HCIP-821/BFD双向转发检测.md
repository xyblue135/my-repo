<u>双向转发检测BFD （Bidirectional Forwarding
Detection），是一个通用的、标准化的、介质无
关、协议无关的快速故障检测机制，用于快速检
测、监控网络中链路或IP路由的转发连通状况。</u>
# BFD快速收敛
单选题 54/1247、如图所示，R1和R2网络层直连，链路中间存在二层传输设备SW1和SW2。现用户希望两端设备能够快速感知中间链
路故障，从而触发路由快速收敛，则应配置以下哪一检测机制？
![image-20247145428789.png|475](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E4%BE%8B%E9%A2%98%E4%B9%8B%E5%A4%96/image-20247145428789.png)
**BFD状态与接口状态联动**
三层物理链路单跳检测
BFD单跳检测二层链路
BFD多跳检测

![image-20247145510633.png|400](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E4%BE%8B%E9%A2%98%E4%B9%8B%E5%A4%96/image-20247145510633.png)

命令示例：
```R1
# 配置接口地址
interface GigabitEthernet0/0
 ip address 10.0.0.1 255.255.255.0
# 启用BFD并配置检测间隔
bfd interval 50 min_rx 50 multiplier 3
bfd enable
# 在OSPF进程中使能BFD
router ospf 1
 network 10.0.0.0 0.0.0.255 area 0
 bfd all-interfaces
```

```R2
# 配置接口地址
interface GigabitEthernet0/0
 ip address 10.0.0.2 255.255.255.0
# 启用BFD并配置检测间隔
bfd interval 50 min_rx 50 multiplier 3
bfd enable
# 在OSPF进程中使能BFD
router ospf 1
 network 10.0.0.0 0.0.0.255 area 0
 bfd all-interfaces
```
# BFD 默认发送间隔为
单选题149/1247、BFD检测报文默认的发送时间间隔为
100ms
**1000ms**
5s
10s

单选题 228/1247、若使两台华为路由器建立BFD会话，且AR1发送时间间隔50毫秒，接受间隔80毫秒；AR2的发送间隔60毫秒，接受
间隔90毫秒。那么以下关于协商后时间间隔的描述，正确的是哪一项？
AR1在协商后发送间隔50毫秒，接收间隔80毫秒
AR2在协商后发送间隔80毫秒，接收间隔90毫秒
**AR2在协商后发送间隔90毫秒，接收间隔80毫秒**
AR1在协商后发送间隔60毫秒，接收间隔90毫秒
<u>
解析：脑袋算一下AR2发送应该为AR2TX相比于AR1RX取最大数值(即非那啥情况下，都是AR1 RX的时间一般为 因为肯定会有延迟的)</u>
# 关于BFD建立会话描述
单选题150/1247、以下关于BFD会话建立方式的描述，错误的是哪一项？
静态配置BFD会话是指通过命令行，手工配置BFD会话参数，包括本地标识符和远端标识符等
系统通过配置本地和远端标识符的方式来区分静态BFD会话和动态BFD会话
动态建立BFD会话时，系统会动态分配本地标识符
**采用静态路由实现三层互通的网络时，只采用动态方式建立BFD会话**
<u>检测用于静态路由实现三层互通的网络时，可以使用动态BFD和静态BFD自协商两种。
</u>

单选题157/1247、下面关于BFD会话的建立方式描述错误的是：
**BFD会话只能通过动态方式建立**
静态配置BFD会话是指通过命令行配置BFD会话参数包括本地标识符和远瑞标识符等
动态建立BFD会话时，动态分配本地标示符
系统通过划分标识符区域的方式来区分静态BFD会话和动态BFD会话
<u>BFD会话可以通过静态方式建立也可通过动态方式建立 。</u>
# BFD+实现静态路由三层互通（静态标识符自协商BFD）
单选题106/1247、以下哪一技术可配置于采用静态路由实现三层互通的网络中，从而达到本端设备既能与对端设备互通，又可实现BFD
检测静态路由的功能
BFD多跳检测
**静态标识符自协商BFD**
BFD单跳检测
调整BFD参数
<u>如果对端设备采用动态BFD，而本端设备既要与之互通，又要能够实现BFD检测静态路由，必须配置静态标识符自协商BFD。该功能主要用于检测采用静态路由实现三层互通的网络中。所以本题选择“静态标识符自协商BFD”。</u>

![image-20247144822880.png|475](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/%E4%BE%8B%E9%A2%98%E4%B9%8B%E5%A4%96/image-20247144822880.png)
# BFD 多跳目的端口号
单选题72/1247、BFD控制报文封装在UDP报文中进行传送，那么多跳BFD控制报文的目的端口号是
5784
**3784**
4784
2784
<u>多跳BFD报文，华为缺省端口号是3784，华三默认是4784</u>

单选题306/1247、配置BFD多跳检测，可实现快速检测和监控网络中的多跳路径。其中多跳BFD控制报文在封装报文时，缺省使用以下
哪个端口号作为目的端口号？
**3784**
4784
2784
5784
# 对端设备不支持bfd解决
单选题305/1247、如果两台设备直接相连，其中一台设备A支持BFD检测功能，而另外一台设备B不支持，那么设备A可以使用以下哪一
种功能实现与设备B直连链路的连通性检测？
**单臂回声**
接口状态联动
双向检测
快速握手
<u>创建单臂回声功能的BFD会话。支持BFD功能的设备主动发起回声请求功能，不支持BFD功能的设备接收到该报文后直接将其环回，从而实现转发链路的连通性检测功能</u>
# BFD联动静态
单选题310/1247、配置BFD与静态默认路由联动的命令是：
**ip route static 0.0.0.0 0.0.0.0 10.0.12.2 track bfd- session 1**
ip route static 0.0.0.0 0.0.0.0 10.0.12.2 bfd -session 1
ip route-static 0.0.0.0 0.0.0.0 10.0.12.2 track 1
ip route -static 0.0.0.0 0.0.0.0 10.0.12.2 track session 1

# BFD报文
单选题356/1247、BFD检测报文被承载于以下哪一类头部之上？
MAC头部
**UDP头部**
TCP头部
IP头部

# BFD 会话状态
单选题378/1247、在设备间建BFD会话过程中，不会经历以下哪一个状态？
**DONE**
DOWN
UP
INIT
<u>BFD会话状态 BFD会话有四种状态:Down、Init、Up和AdminDown。</u>

# 检测时间
![image-20247202433311.png](8%E5%88%B7%E9%A2%98%E7%9A%84/HCIP-821/BFD%E5%8F%8C%E5%90%91%E8%BD%AC%E5%8F%91%E6%A3%80%E6%B5%8B/image-20247202433311.png)
1400毫秒
**1000毫秒**
350毫秒
250毫秒
<u>R1最终协商的TX：50，RX：200，
若采用查询模式，检测时间=RX*本端BFD检测倍数，应为200*5=1000ms。 
若采用异步模式，则要乘以对端检测倍数，为200*7=1400ms。</u>

# 判断题------------------------------------------
判断题 905/1247、BFD为确保两端系统都知道状态的变化，在BFD状态机的建立和拆除时都采用三次握手机制。
**正确**
<u>BFD会话有四种伏态： Down、Init、Up和AdminDown。会话状态变化通过BFD报文的State字段传递，系统根据自己本地的会话状态和接收到的对端BFD报文驱动状态改变， BFD状态机的建立和拆除都采用三次握手机制，以确保两端系统都能知道状态的变化。AdminDown是BFD会话配置的管理状态标识，BFD会话视图执行shutdown命令该会话进入AdminDown状态。下面以BFD会话建立为例，简单介绍状态机的Down、Init、Up状态迁移过程</u>

判断题 991/1247、BFD中的本地标识符和远端标识符配置错误后，若想修改，可删除错误配置再重新配置或直接配置正确标识符覆盖原错误标识符。
**错误**
<u>本地标识符和远端标识符配置成功后不可修改，所以题目中的描述是错误的。</u>

判断题1051/1247、BFD本身并没有邻居发现机制，而是靠被服务的上层应用通知其邻居信息来建立会话。
**正确**

判断题1093/1247、BFD通过周期性检测报文来判断故障是否发生，是一个依赖路由协议的快速故障检测机制。
**错误**
<u>BFD可以自行检测底层链路，也可以依赖路由路由协议自动指定检测对端的地址</u>

缺省情况下，BFD报文发送间隔为（）毫秒，接受间隔为（）毫秒，本地检测为（）次？（请填阿拉伯字）
**1000ms 1000ms 三次**

填空题1164/1247、BFD的检测模式有两种，其中模式下本端按一定的发送周期发送BFD控制报文，检测位置为远端，远端检测本端
是否周期性发送BFD控制报文。（填写中文术语）
**异步**
<u>~~异步模式：按照一定规律周期定期发送，已保证会话状态的连通性。查询模式（蝙蝠雷达）：向对端连续发送多个控制包，看是否可以得到回应。 一般用在对运营商系统的检测~~</u>