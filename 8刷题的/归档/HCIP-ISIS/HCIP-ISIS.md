无端口 封装二层头部

# 基础知识
isis仅仅支持两种链路，一种广播，一种点到点链路  ，也就是说点到多点是不支持的
# ISIS配置命令
isis enable 100 是在接口下启动ISIS命令
## ISIS开销
设备默认isis的开销是1，默认类型为narrow【注意开销不是1，注意开销不是wide】


==VRP平台上==，当我们引入==OSPF路由到ISIS==的时候如果不指定==COST，开销值将默认设为10==.【如果说开销是16是错误的】【也就是说ISIS网络中，ospf的开销是10】
一个IS-IS进程最多可以配置三个区域地址
同一路由器不同ISIS进程之间，默认链路是隔离的
一个ISIS进程最多可以==配置3个区域地址==

# 邻居关系
只有在同一层级的相邻路由器才能成为邻居【重要】
level-1路由器要求area id必须一致【level1-2负责连接，level2是老大，所以level1这种片区需要id一致】
链路两端IS-IS接口的网络类型必须一致
默认情况下，00。【因为ISIS会检测IIH的对端IP地址，所以要在同一网段。】
# 可靠性保证
ISIS协议通过三次握手来确保邻居关系的可靠性
# LSP泛洪时间
IS-IS的LSP泛洪时间为900秒
LSP的最大有效时间为1200秒【OSPF的lsa为3600秒，即1一个小时】

# ISIS报文类型
LSP类似于ospf的lsa，但都是更改路由器的sysname不会影响lsp的生成和更新
【set-overload】 命令 用于设置非伪节点LSP的过载标志位(OL)
【错误】ISIS中，将OL置，该lsp不会在网络扩散，【这个是错的。OL只无法穿越但可以访问。】
LSP报文中的OL字段表示过载标志位，当设置OL后，其他设备在进行SPF计算时不会使用该设备做转发，只计算某直连路由。【正确】
# IS-IS地址格式
ISIS的net地址总长度为【8】字节（1字节区域ID，6字节的system-ID，1字节SEL）
ISIS的TLV包含type length value
ISIS使用TLV（type length value）结构，其中132TLV描述ip接口地址
I==SIS报文采用TLC结构有利于扩展，无需改变整个报文结构 正确== 【TLV（Type-Length-Value）是一种数据结构，用于在网络协议报文中携带各种类型的信息。】
# ISIS重传间隔 
在点到点链路上，默认情况下LSP报文的重传间隔为5秒
# DIS
ISIS在广播网络是DIS，但是没有BDIS
优先级为0的ISIS路由器不能参与DIS选举
==DIS类似于OSPF里面的DR，具有非抢占特性，默认优先级为64==
DIS发送Hello时间间隔为3.3秒，并且周期性发送CSNP报文。。默认为10秒
点对点链路上，初次建立连接时发送 CSNP 报文同步 LSDB。[complete]
当发现 LSDB 不同步时，发送 PSNP 请求邻居发送新的 LSP。[part]
# IS-IS的level区域
level-1路由器使用0180-c200-00【14】地址作为发送IIH的地址【level-2使用0015】
默认情况下，ISIS的level等级为level1-2
level-2是根区域
level1区域lsp可以进入level2
level2区域lsp不可以进入level1
ISIS的levle-2的LSDB包含所有区域的路由信息，【如果说只包含本区域，就错了】

# 简单的
ISIS不能再点对多点P2MP上运行
【错误】运行 IS-IS 的两台路由器，不需要 IH 发送的时间间隔相同即可建立邻接关系。需要发送时间间隔
ATT置位是关于ISIS中的level-1/2路由器连接到level-2区域的一个信息，给level1这个lsp后，会产生一个指向l1/l2的默认路由
设置过载标志位后，其他设备在SPF计算时不适用该设备做转发
OL 表示LSP虽然还会在网络中扩散，但是在计算通过过载路由器的路由时，该LSP不会被采用

## 不简单的
==【错误】运行IS-IS的两台 路由器，只有IH发送的时间间隔相同才可以建立邻接关系==【不需要IH相同】【建立邻接的要求是如果是isis的level 1 需要area id 一致，还有isis的两个接口网络类型要一致，然后还要处于一个网段】
【补充】IH 通常指的是 IIH (IS-IS Hello Packet)，这是路由器用来发现邻居并向邻居宣告自身的存在的一种报文类型。IIH 报文主要用于建立和维护邻居关系。这个hello跟ospf的hello不一样，ospf的hello间隔不一致就不能建立邻接了




IS-IS使用哪 个TLV描述IP Interface Address？
129
128
131
==132==【IIH、 LSP】
# 渗透
如果配置了渗透，level2可以向level1发布路由信息
ISIS的开销COST配置了路由渗透，cost数值选全部最大的，因为要搞明细路由
ISIS的开销COST如果没有配置，cost选离得最近的最小的



以下关于IS-IS中LSP的描述，错误的是哪一项？
LSP有两种类型，分别是Level-1和Level-2【易错】
==将OL置位后，该LSP不会在网络中扩散==【OL置位只表示访问路径无法穿越这台路由器，但是依旧可以访问这台路由器】
LSP ID由三部分组成，System ID、伪节点ID和LSP分片后的编号
LSP的作用是用于交换链路状态信息

在IS-IS中，设置以下哪一项标志位表示LSP虽然还会在网络中扩散，但是在计算通过过载路由器的路由时，该LSP不会被采用？
==OL==【OL置位的路由表示访问路径无法穿越这台路由器，但是依旧可以访问这台路由器】
Checksum
ATT
p

以下关于IS-IS开销的描述，正确的是哪一项？
==条IS-IS路径的Cost等于本路由器到达目标网段沿的所有链路的Cost总和==
缺省情况下，华为设备接口开销值固定为1【10】
缺省情况下，华为路由器采用的开销类型是Wide【narrow】
华为设备不支持根据接口带宽自动计算开销



设备在配置IS-IS缺省情况下，感知邻居故障时间最小为秒级，但通过与BFD联动之后，BFD可代替IS-IS协议的Hello机制，从而将感知邻居故障的时间降至为毫秒级。【正确】【IS-IS设定发送Hello报文的时间间隔为10秒。BFD能够提供轻负荷、快速（毫秒级）的通道故障检测，解决了IS-IS现有检测机制的不足的问题。】
## 路径

![image-20249283725432.png|425](8%E5%88%B7%E9%A2%98%E7%9A%84/%E5%BD%92%E6%A1%A3/HCIP-ISIS/HCIP-ISIS/image-20249283725432.png)
L2的路由不会进入到L1区域；L1区域的路由可以自动的进入到L2区域；属于L1区域的L1/L2路由器，会自动的产生1个ATT为1的L1的LSP条目
收到ATT为1的LSP后，就会产生一个指向L1/L2的默认路由。