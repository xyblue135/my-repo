# 组播地址
组播地址==224.0.1.1==对应的组播mac地址是==01-00-5e-00-01-01==

下面关于组播概念说法错误的是？
组播路由器：支持三层组播功能的路由器或三层交换机
组播组：用IP组播地址标识的一个集合
==组播源：信息的发送者需要加入到组播组提供组播组报文的转发==(组播源是一个单播地址，不需要加入组播组)
组播组成员：组播组成员可以广泛的分布在网络的任何地方

# IGMP协议
IGMP用于管理成员端到组播路由的协议，【属于成员端网络】
IGMP 查询消息的时间间隔配置为 60 秒。
其他查询器超时时间为 `Os`。
IGMP的==三个版本组播都是223.0.0.0-232.255.255.255==【所以说三个版本组播范围不同是错误的】
IGMP协议运行在IP主机与其直接相连的组播路由器之间，维护组播组成员关系
## IGMP snooping
IGMP snooping主要防止二层广播造成的性能浪费，运行后，报文不再二层广播，而是在二层【组播】
IGMP snooping的端口老化时间为180秒
## IGMPV1
在IGMPV1中，如果一个组所有组播成员离开后，路由器需要130秒才会删除对应的组播转发表【60 * 2+10】
【错误】IGMPV1定义了在共享网络中个路由器时选举查询器的机制IGMPv1 【选举查询器是PIM】

## IGMPV2
在==IGMPV2==中，普通组查询的最大响应时间默认为==10秒==
引入查询机制

## IGMPV3
只有IGMPV3支持指定源查询【IGMPv3可以指定源，对！】
IGMPV3与IGMPV1的相应和查询机制不同
SSM 模型会针对每一个 `(S, G)` 信息都生成表项。
IGMP SSM Mapping 不处理 IGMPv3 的报告报文。
IGMPv3 报告 `(G, INCLUDE, (S1))` 表示仅接收源 `S1` 向组播组 `G` 发送的数据。
IGMP SSM MAPPING不处理IGMPv3的报告报文。为了保证同一网段运行任意版本IGMP的主机都能得到SSM 服务，需要在与成员主机所在网段相连的组播路由器接口上运行IGMPv3。


# PIM协议
协议号是103
PIM中缺省情况下，交换机会以==【广播】==的方式转发目的 MAC 地址。【这里需要跟IGMP snooping的用组播区分开来】
PIM/DVMRP是组播转发网络
PIM hello报文发现和维护邻居组播网络地址是224.0.0.13  IP 协议号 103。
汇聚点 RP 为网络中一台重要的 PIM 路由器，无论是静态 RP 还是动态 RP 均可指定服务的组播组。
PIM由(S G)转发，没有(S G) 用 （* G ）转发
PIM `(*, G)` 路由表项由于缺少入接口信息，因此仅依据 `(*, G)` 表无法转发组播流量。
PIM 查询器上静态配置 SSM 地址的映射规则，将 IGMPv1 或 IGMPv2 成员报告中的组加入信息映射为组加入信息【如果说离开就是错误的】
## 两种模式介绍
PIM-SM(ASM模型)适合成员较少，但是分步广泛的大型网络   通过接收者主动加入构建组播分发树，需要维护RP,构建RPT，注册组播源
PIM-SM(SSM模型)适合用户知道组播源位置，直接向组播源请求 通过组播源与组成员之间建立SPT，无需维护RP，构建RPT，注册组播源

PIM-DM(ASM模型）适合规模小的局域网，通过周期性 扩散 剪枝 维护 裸连连接组播源和组成员的单向无环SPT

### PIM-SM（Sparse Mode）(稀疏模式 网络规模大ASS模型和ssm模型)【有RP】
==PIM-SM协议形成的是SPT和RPT==,PIM-DM协议形成的仅仅有 STP
PIM-SM 的 RP 可以为多个组播组服务。【存疑】
【错误】PIM-SM 首次建立组播分发树时，远程 DR 向 RP 发送 Join 报文。然后发送（S G）【应该是【* G】
PIM-SM (SSM) 中==不需要注册组播源==。
PIM-SM 的 SPT 切换完成后，组播流量不再经过 RPT 树。【如果经过就是错的】

#### RP的角色
【补充】在 PIM-SM（Protocol Independent Multicast - Sparse Mode）中，RP 是一个特殊的路由器，它作为组播树的汇聚点，所有的组播流量都会先汇聚到 RP，然后再从 RP 分发到其他接收者。RP 在 PIM-SM 中的主要职责是作为组播树的根节点，协调组播树的构建。
####  RPF的角色
防止环路的
【正确】对于相同的组播源，设备通过RPF检查可以确定设备上唯一的组播流量入接口。

#### 扩展:RPT到SPT
在PIM-SM（Sparse Mode）中，组播数据最初是通过RPT（Rendezvous Point Tree，汇聚点树）进行分发的。随着接收者数量的增加或者为了优化网络性能，PIM会切换到SPT（Shortest Path Tree，最短路径树）进行数据分发。这种从RPT到SPT的切换就是所谓的“SPT切换”。

### PIM-DM(Dense Mode ）（密集模式 网络规模小 ASM模型)【无RP】
没有RP
PIM-SM协议形成的是SPT和RPT,==PIM-DM协议形成的仅仅有 STP==

PIM-DM 中路由器为被裁剪的下游接口启动一个剪枝定时器，默认为 210 秒。

PIM-DM模式在构建组播转发树的过程中包含了以下哪些机制？
状态刷新
==SPT切换==
剪枝
扩散
【补充】
PIM-DM的工作机制包括：  
1-邻居发现  
2-扩散  (组播数据包向所有的PIM邻居泛洪，同时组播路由器产生组播路由表项)
3-剪枝/加入  (如果组播路由器下没有组成员，则将源到该组播路由器的组插转发路径裁掉)
4-嫁接  
5-状态刷新  
6-断言(当组播转发过程中存在多路访问网络则需要选举出一个组播转发路由器，避免重复组播报文)


# 简单的
最短路径树（SPT）是从组播源到接收者的最短路径。
【错误】组播数据转发依赖路由表项，在转发过程中不会产生环路和次优路径等问题。【会环路的】【RPF可以防止环路】
RPF 检查可以防止组播环路，并确定唯一的组播流量入接口。
RPF(组播防环路)不会根据每一份接受的组播报文进行检查。会查路由表
MBGP 的主要作用是帮助跨域组播流进行 RPF 校验。
【错误】==Register==报文是多播发送给RP路由器的【是==单播==发送给RP路由器的】

Value of query interval for I G M P (negotiated ): -s
Value of query interval for I G M P (configured): 60s
Value of other querier timeout for IGM P: Os
该接口上配置发送IGMP查询消息的时间间隔60s  还有一些是 0秒的选项是超时时间



在组播中，【SSM】模型针对特定源和组的绑定数据流提供服务，接收者主机在加入组播组时，可以指定只接收哪些源的数据或指定拒绝接收来自哪些源的数据。加入组播组以后，主机只会收到指定源发送到该组的数据。（英文缩写，全大写） 

无论使用IGMPv1、IGMPv2或IGMPv3加入SSM组播组（V1/V2通过静态绑定加入）；SSM组播组的地址依然是232.0.0.0-232.255.255.255


在组播服务模型中，SSM模型会针对每一个（S，G）信息都生成表项。 【正确】